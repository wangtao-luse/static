pageConfig.reportFloorHideOrBackupHash={fs:1,seckill:2,discount:3,brand:4,buy:5,category:6,like:7,top:8,pop:9},pageConfig.filterChaoshiSkuData=function(e,a,o,i){var t,r=[],n=e.length,p={};if(0===n||!$.isArray(e))return[];for(var d=0;d<n;d++)t=e[d],i&&+t.pPrice>=+t.pcpPrice?_.console.log("skuId(pPrice === pcpPrice): "+t.skuId):($.each(t,function(e,i){if(0!==(i+"").length){if("picUrl"===e&&(i=/^((http(s?):)?)\/\//.test(i)?i:pageConfig.FN_GetImageDomain(d%5)+"jdcms/"+i,i=pageConfig.processImageUrl(i,a,o)),"jdPrice"!==e&&"pPrice"!==e&&"pcpPrice"!==e&&"promoPrice"!==e||(i=(+i).toFixed(2)),"backUpPics"===e)for(var t=0,r=i.length;t<r;t++)i[t]=i[t].replace(/http(s?):/,""),i[t]=i[t].replace(/!q70.jpg/,"!q90.jpg");p[e]=i}}),r.push(p),p={});return r},pageConfig.filterChaoshiAdData=function(e){var a=[],o=e.length,i="";if(0===o||!$.isArray(e))return[];for(var t=0;t<o;t++){i=pageConfig.FN_GetImageDomain(t%5);var r=e[t];a[t]={link:r.link.replace(/http(s?):/,""),pictureUrl:r.pictureUrl.replace(/http(s?):/,"").replace("//m.360buyimg.com",i),name:r.name}}return a},define("chaoshi_mod_conf",function(e,a,o){"use strict";var i={TIMEOUT:3e3,TIME:1,TIME2:2,INTERFACE:{AIBI_SKU:"//ai.jd.com/General?app=Bi&action=get_sku&groupId=",AIBI_AD:"//ai.jd.com/General?app=Bi&action=get_ad&groupId=",AIBI_SKU_BACKUP:"//www.3.cn/bup/index_new.php?app=Bi&action=get_sku&groupId=",AIBI_AD_BACKUP:"//www.3.cn/bup/index_new.php?app=Bi&action=get_ad&groupId=",IS_XINREN:"//ai.jd.com/index_new.php?app=Newuser&action=isNewuser",MORE:"//diviner.jd.com/diviner",MORE_BACKUP:null,COUPON:"//cds.3.cn/jsf/get?k=coupons",COUPON_BACKUP:null}};return i}),define("v3/widget/chaoshi_mod_toolbar",function(e){function a(){return pageConfig.toolbar=!0,!$("#J-global-toolbar").length&&void setTimeout(function(){$("body").append('<div id="J-global-toolbar"></div>');var e={pType:"food"};seajs.use(["//static.360buyimg.com/devfe/toolbar/1.0.0/js/main.js"],function(a){$('<style type="text/css">.jdm-toolbar .jdm-toolbar-footer .jdm-tbar-tab-survey .tab-ico {display: none;_display:none;}.jdm-toolbar .jdm-toolbar-footer .jdm-tbar-tab-survey .tab-text {left: 0px;width: 35px;height:30px;padding:2px 0 3px;line-height: 15px;background: #c81623;_display:block;</style>').appendTo($("head:eq(0)"));var o={top:{anchor:"#"}};pageConfig.surveyLink&&(o.feedback={href:pageConfig.surveyLink}),pageConfig.awardsLink&&pageConfig.awardsTitle&&(o.survey={href:pageConfig.awardsLink,title:pageConfig.awardsTitle}),e.links=o,e.bars={jimi:{iframe:"//jimi.jd.com/index.action?source=jdhome"}},pageConfig.toolbar=new a(e)})},1e3)}seajs.config({paths:{MISC:"://misc.360buyimg.com",APP_ROOT:"//misc.360buyimg.com/channel/supermarket/1.0.1"}}),a(),seajs.use("v3/widget/chaoshi_mod_goods",function(e){new e({$el:$(".mod_container")})})}),define("v3/widget/chaoshi_mod_goods",function(e){"use strict";function a(e){this.conf=$.extend({$el:null},e),this.init()}return a.prototype={constructor:a,init:function(){this.initAddToCart()},initAddToCart:function(){var e=this;seajs.use(["APP_ROOT/js/flyToCart"],function(a){e.conf.$el.delegate(".J_goods_add","click.addToCart",function(e){e.preventDefault();var o=$(this),i=o.parents(".J_goods_item"),t=o.offset().top,r=o.offset().left,n=i.find(".J_goods_price").data("price-id"),p=i.find(".J_goods_img").attr("src");a(n,p,{top:t,left:r})})})}},a}),seajs.use("v3/widget/chaoshi_mod_toolbar"),define("v3/widget/chaoshi_mod_bi",function(e,a,o){"use strict";var i=e("load_async"),t=e("report"),r=e("chaoshi_mod_conf"),n=r.INTERFACE,p={getAds:function(e){var a=$.extend({url:n.AIBI_AD,backup:n.AIBI_AD_BACKUP,isNeedBackup:!0,isHide:!0,id:"",propName:"adData",cb:function(){},$obj:null,elId:"",dataName:"",floorName:"",size:"",minNum:e.minNum},e);p.getDataWrap(a)},getGoods:function(e){var a=$.extend({url:n.AIBI_SKU,backup:n.AIBI_SKU_BACKUP,isNeedBackup:!0,isHide:!0,id:"",propName:"data",cb:function(){},$obj:null,elId:"",dataName:"",floorName:"",size:"",minNum:e.minNum},e);p.getDataWrap(a)},getDataWrap:function(e){return p.getData(e).then(function(a){try{if(a&&a.DATA&&a.DATA[e.propName]&&a.DATA[e.propName].length>0&&("data"===e.propName&&a.DATA[e.propName][0].skuData&&a.DATA[e.propName][0].skuData.length>=(e.minNum||0)||"adData"===e.propName&&a.DATA[e.propName].length>=(e.minNum||0))){var o=[];o="data"==e.propName?pageConfig.filterChaoshiSkuData(a.DATA[e.propName][0].skuData,e.size[1],e.size[0]):pageConfig.filterChaoshiAdData(a.DATA[e.propName]),window.data[e.elId][e.dataName]=o,e.cb&&e.cb(o)}else _.console.log(e.id+": data error!"),p.apiErrorHandler(e)}catch(i){_.console.log(e.id+": try catch error!"),p.apiErrorHandler(e)}},function(a){_.console.log(e.id+": fail"),e.isNeedBackup&&t.processBackup(pageConfig.reportFloorHideOrBackupHash[e.floorName]),p.apiErrorHandler(e)})},getData:function(e){return i({url:e.url+e.id,backup:e.isNeedBackup?e.backup+e.id:null,params:e.params||{},timeout:r.TIMEOUT,times:r.TIME,jsonpCallback:e.elId+"_"+e.id,dataCheck:function(a){if(a&&a.DATA&&a.DATA[e.propName]&&a.DATA[e.propName].length>0){if("data"===e.propName&&a.DATA[e.propName][0].skuData&&a.DATA[e.propName][0].skuData.length>=(e.minNum||0))return!0;if("adData"===e.propName&&a.DATA[e.propName].length>=(e.minNum||0))return!0}return _.console.log(e.id+": dataCheck error!"),!1}})},apiErrorHandler:function(e){$.isFunction(e.failCb)&&e.failCb(),e.isHide&&_.console.log(e.elId+": hide!"),e.isHide&&e.$obj.hide(),e.isHide&&p.updateLiftHandler(e),e.isHide&&t.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[e.floorName])},updateLiftHandler:function(e){for(var a=$("[data-elevator]"),o=$(".chaoshi_lift_item"),i=0,t=a.length;i<t;i++)if($(a[i]).attr("id")===e.elId)return _.console.log("Update Lift!The Floor is "+e.elId),o.eq(i).remove(),e.$obj.removeAttr("data-elevator"),void window.chaoshiLift.update($("[data-elevator]"))}};return p});define("v3/widget/chaoshi_nav",function(t){"use strict";var a=t("v3/widget/chaoshi_mod_bi"),i=t("o2tpl"),o=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],portal_floor_id:"1"},t),this.init()},init:function(){this.floorName="fs",this.hasShowPop=[],this.lazyAttr="data-lazy-img2",this.groupIdsAd=this.conf.groupIdsAd.slice(4),this.dataNameAd=[],this.dataNameAdNum=[];for(var t=0;t<9;t++)this.dataNameAd[t]="navThirdAct"+(t+1),this.dataNameAdNum[t]=1;this.dom='{% if (o.navThirdActItem && o.navThirdActItem.length > 0) { %}\n                  {% var z = o.i; %}\n                  {% var len = o.navThirdActItem.length < 3 ? o.navThirdActItem.length : 3; %} \n                  {% for (var n = 0; n < len; n++) { %}\n                  <a href="{%= o.navThirdActItem[n].link %}" clstag="channel|keycount|{%=o.portal_id%}|BANNERNAVRECOMMEND{%=o.portal_floor_id%}_{%=z+1%}_{%=n+1%}" target="_blank" class="chaoshi_nav_recommend_link{%= (n === o.navThirdActItem.length - 1) ? \' chaoshi_nav_recommend_link_last\': \'\' %}" onclick="++pageConfig.chaoshiClickNum;log(\'chaoshi\',\'words\',\'{%= o.navThirdActItem[n].title %}\',\'{%= z %}_1_{%= n+1 %}\',\'{%= n+1 %}\');">\n                    <img src="//static.360buyimg.com/mtd/pc/cms/images/mod_1x1.png" data-lazy-img="{%= o.navThirdActItem[n].pictureUrl %}" class="chaoshi_nav_recommend_pic" alt="{%= o.navThirdActItem[n].name %}" title="{%= o.navThirdActItem[n].name %}" data-webp="no">\n                  </a>\n                  {% }} %}',this.$navRecommend=$(".chaoshi_nav_recommend"),this.initEvent()},initEvent:function(){var t=this,a=t.conf;a.$el.delegate(".chaoshi_nav_body .item","mouseenter",function(){var a=$(this),i=a.find(".item_body"),o=a.index();i.find(".chaoshi_nav_sub");if(i.show(),a.addClass("item_hover").find(".item_decoration").show(),o>4){var e=551-i.height();e=Math.max(e,0),i.css("top",e)}i.css("visibility","visible"),t.hasShowPop[o]||(t.initAdData(o),t.hasShowPop[o]="done")}).delegate(".chaoshi_nav_body .item","mouseleave",function(){$(this).removeClass("item_hover").find(".item_body").hide().end().find(".item_decoration").hide()})},initAdData:function(t){var o=this,e=o.conf,n=o.dataNameAd[t];a.getAds({$obj:e.$el,elId:e.elId,dataName:n,floorName:o.floorName,id:o.groupIdsAd&&o.groupIdsAd[t].ANCHOR||"",minNum:o.dataNameAdNum[t],isNeedBackup:!1,isHide:!1,cb:function(a){var n={};n.navThirdActItem=a,n.i=t,n.portal_id="3054",n.portal_floor_id=e.portal_floor_id;try{var s=i(o.dom,n);o.$navRecommend.eq(t).html(s),$(window).trigger("resize")}catch(c){_.console.log(c)}},failCb:function(a){_.console.log("nav item_body call failCb"),e.$el.find(".item_body").eq(t).addClass("norecommend")}})}});return o}),define("v3/widget/chaoshi_banner",["//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js","//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"],function(t){"use strict";var a=t("//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js"),i=t("//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"),o=(t("chaoshi_mod_conf"),t("load_async"),_.Class.extend({construct:function(t){this.conf=$.extend({$el:null},t),this.$carouselMain=this.conf.$el.find(".chaoshi_carousel_main"),this.$carouselMainImg=this.$carouselMain.find("img"),this.carouselWidth=this.$carouselMain.width(),this.lazyAttr="data-lazy-img",this.lazyAttr2="data-lazy-img2";var i=this;this.carousel=new a({container:this.$carouselMain,itemSelector:".chaoshi_carousel_item",activeClass:"chaoshi_carousel_item_on",startIndex:0,duration:300,delay:5e3,switchType:"fade",onBeforeSwitch:$.proxy(function(t,a){this.switchCarouselNav(a)},this),onFirstSwitch:function(t){i.loadImg(i.$carouselMainImg,t);var a=i.length-1,o=t+1>a?0:t+1;i.loadImg(i.$carouselMainImg,o)}}),this.$jsAct=$("#J_fs_act"),this.initCarouselNav(),this.initEvent()},loadImg:function(t,a){var i=this,o=t.eq(a),e=o.attr(i.lazyAttr2);e&&(o.attr(i.lazyAttr,e).removeAttr(i.lazyAttr2),$(window).trigger("resize"))},loadFsAct:function(){var t=this,a=t.$jsAct.find(".J_fsbanner img"),i=a.attr(t.lazyAttr2);i&&a.attr("src",i)},initEvent:function(){var t=this;try{this.conf.$el.delegate(".chaoshi_carousel_prev","click",$.proxy(i.throttle(this.prevCarousel,200),this)).delegate(".chaoshi_carousel_next","click",$.proxy(i.throttle(this.nextCarousel,200),this)).delegate(".chaoshi_carousel_nav_btn","mouseenter",i.throttle(function(){var a=$(this).index(),i=t.carousel;i.stop(),$(this).siblings().removeClass("chaoshi_carousel_nav_btn_on").end().addClass("chaoshi_carousel_nav_btn_on"),i.switchTo(a)},500)).delegate("#J_fs_act_lk","mouseenter",function(){t.$jsAct.addClass("active"),t.loadFsAct()}).delegate("#J_fs_act","mouseleave",function(){t.$jsAct.removeClass("active")}).delegate(".J_fsbanner_close","click",function(){t.$jsAct.removeClass("active")})}catch(a){_.console.log("delegate error"),_.console.log(a)}},prevCarousel:function(t){try{t&&t.preventDefault(),this.carousel.switchToPrev()}catch(a){_.console.log("prevCarousel error"),_.console.log(a)}},nextCarousel:function(t){try{t&&t.preventDefault(),this.carousel.switchToNext()}catch(a){_.console.log("nextCarousel error"),_.console.log(a)}},switchCarouselNav:function(t){var a=$(this.conf.$el.find(".chaoshi_carousel_nav_btn").get(t));a.siblings().removeClass("chaoshi_carousel_nav_btn_on").end().addClass("chaoshi_carousel_nav_btn_on")},initCarouselNav:function(){for(var t=this.carousel.length,a=[],i=0;i<t;i++){var o=null,e="";i===t-1?o="chaoshi_carousel_nav_btn_last":0===i&&(o="chaoshi_carousel_nav_btn_on"),o="string"==typeof o?" "+o:"",e='<a href="javascript:void(0)" class="chaoshi_carousel_nav_btn'+o+'"></a>',a.push(e)}this.conf.$el.find(".chaoshi_carousel_nav").html(a.join("")).find(".chaoshi_carousel_nav_btn").css("width",(this.carouselWidth-t+1)/t)}}));return o}),define("v3/widget/chaoshi_handy",["//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js","//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"],function(t){"use strict";var a=t("//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js"),i=t("//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"),o=_.Class.extend({construct:function(t){this.conf=$.extend({$el:null},t),this.$carouselMain=this.conf.$el.find(".chaoshi_handy_carousel_main"),this.$carouselMainImg=this.$carouselMain.find("img"),this.carouselWidth=this.$carouselMain.width(),this.lazyAttr="data-lazy-img",this.lazyAttr2="data-lazy-img2";var i=this;this.carousel=new a({container:this.$carouselMain,itemSelector:".chaoshi_handy_carousel_item",activeClass:"on",startIndex:0,duration:300,delay:5e3,switchType:"fade",onBeforeSwitch:$.proxy(function(t,a){this.switchCarouselNav(a)},this),onFirstSwitch:function(t){i.loadImg(i.$carouselMainImg,t);var a=i.length-1,o=t+1>a?0:t+1;i.loadImg(i.$carouselMainImg,o)}}),this.initCarouselNav(),this.initEvent()},loadImg:function(t,a){var i=this,o=t.eq(a),e=o.attr(i.lazyAttr2);e&&(o.attr(i.lazyAttr,e).removeAttr(i.lazyAttr2),$(window).trigger("resize"))},initEvent:function(){var t=this;this.conf.$el.delegate(".chaoshi_handy_carousel_nav_btn","mouseenter",i.throttle(function(){var a=$(this).index(),i=t.carousel;i.stop(),a!==i.getCurrent()&&($(this).siblings().removeClass("on").end().addClass("on"),i.switchTo(a))},500))},switchCarouselNav:function(t){var a=$(this.conf.$el.find(".chaoshi_handy_carousel_nav_btn").get(t));a.siblings().removeClass("on").end().addClass("on")},initCarouselNav:function(){for(var t=this.carousel.length,a=[],i=0;i<t;i++){var o=null,e="";0===i&&(o="on"),o="string"==typeof o?" "+o:"",e='<a href="javascript:void(0)" class="chaoshi_handy_carousel_nav_btn'+o+'"></a>',a.push(e)}this.conf.$el.find(".chaoshi_handy_carousel_nav").html(a.join(""))}});return o}),define("v3/widget/chaoshi_fs_render",function(t){"use strict";var a=t("load_async"),i=t("chaoshi_mod_conf"),o=t("report"),e=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],groupIdsSku:[],next:function(){}},t),this.init()};return e.prototype={init:function(){var t=4,a=1;this.canNextLen=t+a,this.dataNameAd=["carouselItems","bottomRecs1","bottomRecs2","bgad"],this.isNeedBackup=[!0,!0,!0,!1],this.dataNameAdNum=[1,1,1,0],this.dataNameSku=["handyGoods"],this.dataNameSkuNum=[1],this.dataNameSkuImgSize=[{retia:"200x200",normal:"100x100"}],this.floorHashStr="fs";for(var i=0;i<t;i++)this.initAdData(this.conf.groupIdsAd[i].ANCHOR||"",this.dataNameAd[i],this.dataNameAdNum[i]);for(var i=0;i<a;i++)this.initSkuData(this.conf.groupIdsSku[i].ANCHOR||"",this.dataNameSku[i],this.dataNameSkuNum[i],this.dataNameSkuImgSize[i])},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initAdData:function(t,e,n){var s=this,c=s.conf.elId,r=i.INTERFACE;a({url:r.AIBI_AD+t,backup:r.AIBI_AD_BACKUP+t,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:s.conf.elId+"_"+e,dataCheck:function(t){return!!("object"==typeof t&&0==t.ERR_CODE&&$.isArray(t.DATA.adData)&&t.DATA.adData.length>=n)}}).then(function(a){try{"object"==typeof a&&0===a.ERR_CODE&&a.DATA&&a.DATA.adData&&a.DATA.adData.length>=n?(window.data[c][e]=pageConfig.filterChaoshiAdData(a.DATA.adData),s.canNext()):s.hideFloor(t)}catch(i){s.hideFloor(t)}},function(){o.processBackup(pageConfig.reportFloorHideOrBackupHash[s.floorHashStr]),s.hideFloor(t)})},initSkuData:function(t,e,n,s){var c=this,r=i.INTERFACE;a({url:r.AIBI_SKU+t,backup:r.AIBI_SKU_BACKUP+t,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:c.conf.elId+"_"+e,dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=n)}}).then(function(a){try{"object"==typeof a&&0===a.ERR_CODE&&$.isArray(a.DATA.data)&&$.isArray(a.DATA.data[0].skuData)&&a.DATA.data[0].skuData.length>=n?(window.data[c.conf.elId][e]=pageConfig.filterChaoshiSkuData(a.DATA.data[0].skuData,s.retia,s.normal),c.canNext()):c.hideFloor(t)}catch(i){c.hideFloor(t)}},function(){o.processBackup(pageConfig.reportFloorHideOrBackupHash[c.floorHashStr]),c.hideFloor(t)})},hideFloor:function(t){this.conf.$el.hide(),_.console.log(t+" error"),o.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[this.floorHashStr])}},e});define("v3/widget/chaoshi_seckill",["//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js","//static.360buyimg.com/mtd/pc/components/1.0.0/countdown/countdown.js"],function(t,i,o){"use strict";var a=t("//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"),e=t("//static.360buyimg.com/mtd/pc/components/1.0.0/countdown/countdown.js"),s=t("o2tpl"),n=t("load_async"),c=t("chaoshi_mod_conf"),r=t("report");window.countTime=null,"function"!=typeof Array.prototype.map&&(Array.prototype.map=function(t,i){var o=[];if("function"==typeof t)for(var a=0,e=this.length;a<e;a++)o.push(t.call(i,this[a],a,this));return o});var l=function(t){this.conf=$.extend({$el:null,time:[],elId:"",qianggou:"",groupIdsSku:[]},t),this.dom=["{% $.each(o.goods, function (i, obj) { %}","{% if (i < 5) { %}","<li class=\"chaoshi_seckill_item csi{%= i === (5-1) ? ' last' : '' %}\" onclick=\"++pageConfig.chaoshiClickNum;log('chaoshi','qianggou','{%= obj.skuId %}_biClk','{%= i+1 %}');\">",'  <div class="csi_pic">',"    {% if (obj.copyWriting && obj.copyWriting.length > 0) { %}",'    <div class="csi_tag"><b class="mod_ver"></b><span class="csi_tag_txt">{%= obj.copyWriting %}</span></div>',"    {% } %}",'    <a class="csi_pic_lk" href="{%= o.qianggou + \'#\' + obj.skuId %}" target="_blank" clstag="channel|keycount|{%=o.portal_id%}|sale_item{%=o.portal_floor_id%}_{%=i%}">','      <img class="csi_img" src="//static.360buyimg.com/mtd/pc/cms/images/mod_1x1.png" data-lazy-img="{%= obj.picUrl %}" alt="{%= obj.name %}" title="{%= obj.name %}" >','      <p class="csi_name">{%= obj.name %}</p>',"    </a>","  </div>",'  <p class="csi_price clearfix">','    <span class="csi_price_new" data-price-id="{%= obj.skuId %}">&yen;{%= obj.promoPrice ? obj.promoPrice : obj.pPrice %}</span>','    <del class="csi_price_origin" data-price-id="{%= obj.skuId %}" data-price-type="m">&yen;{%= obj.pcpPrice %}</del>',"  </p>","</li>","{% }}); %}"].join(""),this.$ul=this.conf.$el.find(".chaoshi_seckill_list"),this.qianggou=this.$ul.attr("data-qianggou"),this.floorHashStr="seckill",this.init()};return l.prototype={init:function(){this.setSkTime(this),_.console.log("Seckill init")},setSkTime:function(){var t=this;t.initData();var i=t.getTimeSchedules();_.console.log(i);var o=t.conf.$el.find(".chaoshi_seckill_time");countTime=new e({startTime:i.start,endTime:i.end,stateCallback:function(i){o.find(".time_hour .time_item_txt").text(i.hour),o.find(".time_minute .time_item_txt").text(i.minute),o.find(".time_second .time_item_txt").text(i.second),0==i.hour&&0==i.minute&&0==i.second&&(_.console.log(i),setTimeout(function(){countTime.pause(),t.setSkTime()},1e3))}})},getTimeSchedules:function(){var t=new Date,i=a.getCalendar(t,0),o=a.getCalendar(t,1),e=t.getHours();i.split("/")[1],i.split("/")[2],o.split("/")[1],o.split("/")[2];_.console.log(e);var s={start:i+" 00:00:00",end:i+" 08:00:00"};return e>=8&&e<12&&(s={start:i+" 08:00:00",end:i+" 12:00:00"}),e>=12&&e<16&&(s={start:i+" 12:00:00",end:i+" 16:00:00"}),e>=16&&e<20&&(s={start:i+" 16:00:00",end:i+" 20:00:00"}),e>=20&&e<24&&(s={start:i+" 20:00:00",end:o+" 00:00:00"}),s},getSkTime:function(){for(var t=this,i=[],o=new Date,e=a.getCalendar(o,0),s=t.conf.time,n=0,c=s.length;n<c;n++){var r=s[n];i.push({start:e+" "+r.NAME+":00:00",end:e+" "+r.property+":00:00"})}return i},initData:function(){var t=this.conf.groupIdsSku.length;this.dataNameSku=["goods"],this.dataNameSkuNum=[5];for(var i=0;i<t;i++)this.initSkuData(this.conf.groupIdsSku[i].ANCHOR||"",this.dataNameSku[i],this.dataNameSkuNum[i])},initSkuData:function(t,i,o){var a=this,e=c.INTERFACE;n({url:e.AIBI_SKU+t,backup:e.AIBI_SKU_BACKUP+t,times:c.TIME,timeout:c.TIMEOUT,jsonpCallback:a.conf.elId+"_"+i,params:{num:1,position:0},dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=o)}}).then(function(e){try{if("object"==typeof e&&0===e.ERR_CODE&&$.isArray(e.DATA.data)&&$.isArray(e.DATA.data[0].skuData)&&e.DATA.data[0].skuData.length>=o){var n={},c=!0;n[i]=pageConfig.filterChaoshiSkuData(e.DATA.data[0].skuData,"260x260","130x130",c),n.qianggou=a.qianggou,n.portal_id="3054",n.portal_floor_id="_"+a.conf.elId;try{var r=s(a.dom,n);a.$ul.html(r),$(window).trigger("resize")}catch(l){a.hideFloor(t),_.console.log(l)}}else a.hideFloor(t)}catch(u){a.hideFloor(t)}},function(){r.processBackup(pageConfig.reportFloorHideOrBackupHash[a.floorHashStr]),a.hideFloor(t)})},hideFloor:function(t){var i=this,o=i.conf,a=o.$el;a.hide(),_.console.log(t+" error"),r.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[i.floorHashStr])}},l});define("v3/widget/chaoshi_discount_render",function(t,a,o){"use strict";var e=t("load_async"),i=t("chaoshi_mod_conf"),r=t("report"),n=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsSku:[],next:function(){}},t),this.init()};return n.prototype={init:function(){var t=this.conf.groupIdsSku.length;this.canNextLen=this.conf.groupIdsSku.length,this.dataNameSku=["goodsBig","goodsSmall"],this.dataNameSkuNum=[3,5],this.dataNameSkuImgSize=[{retia:"300x300",normal:"150x150"},{retia:"260x260",normal:"130x130"}],this.floorHashStr="discount";for(var a=0;a<t;a++)this.initSkuData(this.conf.groupIdsSku[a].ANCHOR||"",this.dataNameSku[a],this.dataNameSkuNum[a],this.dataNameSkuImgSize[a])},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initSkuData:function(t,a,o,n){var s=this,d=i.INTERFACE;e({url:d.AIBI_SKU+t,backup:d.AIBI_SKU_BACKUP+t,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:s.conf.elId+"_"+a,dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=o)}}).then(function(e){try{"object"==typeof e&&0===e.ERR_CODE&&$.isArray(e.DATA.data)&&$.isArray(e.DATA.data[0].skuData)&&e.DATA.data[0].skuData.length>=o?(window.data[s.conf.elId][a]=pageConfig.filterChaoshiSkuData(e.DATA.data[0].skuData,n.retia,n.normal),s.canNext()):s.hideFloor(t)}catch(i){s.hideFloor(t)}},function(){r.processBackup(pageConfig.reportFloorHideOrBackupHash[s.floorHashStr]),s.hideFloor(t)})},hideFloor:function(t){var a=this,o=a.conf,e=o.$el;e.hide(),_.console.log(t+" error");for(var i=$("[data-elevator]"),n=$(".chaoshi_lift_item"),s=0,d=i.length;s<d;s++)if($(i[s]).attr("id")===o.elId)return n.eq(s).remove(),e.removeAttr("data-elevator"),void chaoshiLift.update($("[data-elevator]"));r.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[a.floorHashStr])}},n});define("v3/widget/chaoshi_rec_render",function(t,e,n){"use strict";var i=t("v3/widget/chaoshi_mod_bi"),d=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],next:function(){}},t),this.init()};return d.prototype={init:function(t){this.canNextLen=1,this.loadedEvent=this.conf.elId+"Loaded",this.dataNameAd=["colImg"],this.dataNameAdNum=[0],this.initEvent(),this.initAdData()},initEvent:function(){var t=this,e=t.conf;_.eventCenter.on(t.loadedEvent,function(){--t.canNextLen,0===t.canNextLen&&e.next&&e.next()})},initAdData:function(){for(var t,e=this,n=this.conf,d=n.groupIdsAd.length,a=0;a<d;a++)t=e.dataNameAd[a],i.getAds({$obj:n.$el,elId:n.elId,dataName:t,id:n.groupIdsAd[a].ANCHOR||"",minNum:e.dataNameAdNum[a],isNeedBackup:!1,cb:function(t){_.eventCenter.trigger(e.loadedEvent)}})}},d});define("v3/widget/chaoshi_brand_render",function(t,a,o){"use strict";var e=t("load_async"),n=t("chaoshi_mod_conf"),i=t("report"),r=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],next:function(){}},t),this.init()};return r.prototype={init:function(){var t=this.conf.groupIdsAd.length;this.canNextLen=t,this.dataNameAd=["todayBrand","bigBrand","smallBrand"],this.dataNameAdNum=[1,4,5],this.floorHashStr="brand";for(var a=0;a<t;a++)this.initAdData(this.conf.groupIdsAd[a].ANCHOR||"",this.dataNameAd[a],this.dataNameAdNum[a])},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initAdData:function(t,a,o){var r=this,d=n.INTERFACE;e({url:d.AIBI_AD+t,backup:d.AIBI_AD_BACKUP+t,times:n.TIME,timeout:n.TIMEOUT,jsonpCallback:r.conf.elId+"_"+a,dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.adData)&&t.DATA.adData.length>=o)}}).then(function(e){try{"object"==typeof e&&0===e.ERR_CODE&&$.isArray(e.DATA.adData)&&e.DATA.adData.length>=o?(window.data[r.conf.elId][a]=pageConfig.filterChaoshiAdData(e.DATA.adData),r.canNext()):r.hideFloor(t)}catch(n){r.hideFloor(t)}},function(){i.processBackup(pageConfig.reportFloorHideOrBackupHash[r.floorHashStr]),r.hideFloor(t)})},hideFloor:function(t){var a=this,o=a.conf,e=o.$el;e.hide(),_.console.log(t+" error");for(var n=$("[data-elevator]"),r=$(".chaoshi_lift_item"),d=0,h=n.length;d<h;d++)if($(n[d]).attr("id")===o.elId)return r.eq(d).remove(),e.removeAttr("data-elevator"),void chaoshiLift.update($("[data-elevator]"));i.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[a.floorHashStr])}},r});define("v3/widget/chaoshi_buy_render",function(t,e,a){"use strict";var i=t("load_async"),n=t("chaoshi_mod_conf"),s=t("report"),c=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsSku:[],next:function(){}},t),this.init()};return c.prototype={init:function(){this.conf.groupIdsSku.length;this.canNextLen=1,this.dataNameSku=["goodsBuy","goodsXinren","xinrenImg2"],this.dataNameSkuNum=[6,5,1],this.dataNameSkuImgSize=[{retia:"280x280",normal:"140x140"},{retia:"280x280",normal:"140x140"}],this.dataNameSkuShow="goodsShow",this.endTitle="endTitle",this.floorHashStr="buy";for(var t=this.conf.elId,e=$("[data-elevator]"),a=0,i=e.length;a<i;a++)$(e[a]).attr("id")===t&&(this.liftEq=a);var o=window.data[t];o[this.dataNameSku[0]]=[],o[this.dataNameSku[1]]=[],o[this.dataNameSku[2]]=[],this.isXinren()},isXinren:function(){var t=this,e=t.conf,a=e.elId,o=window.data[a];i({url:n.INTERFACE.IS_XINREN,backup:null,times:n.TIME,timeout:n.TIMEOUT,jsonpCallback:"isNewuser"}).then(function(a){try{a&&!a.islogin?(o.isNew=2,o[t.dataNameSkuShow]=o.goodsBackup,o[t.endTitle]=o.title3[0].NAME,t.canNext()):a&&!a.isNew?(o.isNew=0,t.initSkuData(e.groupIdsSku[0].ANCHOR||"",t.dataNameSku[0],t.dataNameSkuNum[0],t.dataNameSkuImgSize[0])):a&&a.isNew&&(o.isNew=1,t.canNextLen=2,t.initSkuData(e.groupIdsSku[1].ANCHOR||"",t.dataNameSku[1],t.dataNameSkuNum[1],t.dataNameSkuImgSize[1]),t.initAdData(e.groupIdsSku[2].ANCHOR||"",t.dataNameSku[2],t.dataNameSkuNum[2]))}catch(i){_.console.log(i),t.filterGoods([]),t.canNext()}},function(){t.filterGoods([]),t.canNext()})},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initSkuData:function(t,e,a,o){var c=this,r=c.conf,l=n.INTERFACE;i({url:l.AIBI_SKU+t,backup:l.AIBI_SKU_BACKUP+t,times:n.TIME,timeout:n.TIMEOUT,jsonpCallback:r.elId+"_"+e,dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=a)}}).then(function(t){try{if("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=a){var e=pageConfig.filterChaoshiSkuData(t.DATA.data[0].skuData,o.retia,o.normal);c.filterGoods(e),c.canNext()}else c.filterGoods([]),c.canNext()}catch(i){c.filterGoods([]),c.canNext()}},function(){s.processBackup(pageConfig.reportFloorHideOrBackupHash[c.floorHashStr]),c.filterGoods([]),c.canNext()})},initAdData:function(t,e,a){var o=this,c=o.conf,r=c.elId,l=n.INTERFACE;i({url:l.AIBI_AD+t,backup:l.AIBI_AD_BACKUP+t,times:n.TIME,timeout:n.TIMEOUT,jsonpCallback:o.conf.elId+"_"+e,dataCheck:function(t){return!!("object"==typeof t&&0==t.ERR_CODE&&$.isArray(t.DATA.adData)&&t.DATA.adData.length>=a)}}).then(function(i){try{"object"==typeof i&&0===i.ERR_CODE&&i.DATA&&i.DATA.adData&&i.DATA.adData.length>=a?(window.data[r][e]=i.DATA.adData,o.canNext()):o.hideFloor(t)}catch(n){o.filterGoods([]),o.canNext()}},function(){s.processBackup(pageConfig.reportFloorHideOrBackupHash[o.floorHashStr]),o.hideFloor(t)})},filterGoods:function(t){var e=this,a=e.conf.elId,i=window.data[a],n=i.isNew,s=i.goodsBackup,c=t,r=t.length;0===r?(i.isNew=2,c=s,c.length>12&&c.splice(12,c.length-12),i[e.endTitle]=i.title3[0].NAME,$(".chaoshi_lift_item").eq(e.liftEq).html(i[e.endTitle])):0===n?(r<6&&(c=c.concat(o.goodsBackup)),c.length>12&&c.splice(12,c.length-12),i[e.endTitle]=i.title[0].NAME):1===n&&(c.length>5&&c.splice(6,c.length-6),i[e.endTitle]=i.title2[0].NAME),i[e.dataNameSkuShow]=c},hideFloor:function(t){var e=this,a=e.conf,i=a.$el;i.hide(),_.console.log(t+" error"),$(".chaoshi_lift_item").eq(e.liftEq).remove(),i.removeAttr("data-elevator"),chaoshiLift.update($("[data-elevator]")),s.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[e.floorHashStr])}},c}),define("v3/widget/chaoshi_buy",["//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js","//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js"],function(t,e,a){"use strict";var i=t("//static.360buyimg.com/mtd/pc/components/1.0.0/util/util.js"),o=t("//static.360buyimg.com/mtd/pc/components/1.0.0/carousel/carousel.js"),n=function(t){this.conf=$.extend({$el:null},t),this.init()};return n.prototype={init:function(){var t=1194,e=this.conf.$el.find(".goods_list_items"),a=(this.conf.$el.find(".chaoshi_buy_goods_btns"),e.length);a>1&&(this.carousel=new o({container:this.conf.$el.find(".chaoshi_buy_goods_list"),itemSelector:".goods_list_items",itemWidth:t,activeClass:"on",startIndex:0,duration:300,delay:4e3,isAuto:!0,switchType:"slide",onFirstSwitch:function(){$(window).trigger("resize")}}),this.initEvent())},initEvent:function(){var t=this;t.conf.$el.delegate(".chaoshi_buy_goods_prev","click",$.proxy(i.throttle(t.prev,300),t)).delegate(".chaoshi_buy_goods_next","click",$.proxy(i.throttle(t.next,300),t))},prev:function(){this.carousel.switchToPrev()},next:function(){this.carousel.switchToNext()}},n});define("v3/widget/chaoshi_category_render",function(t,a,o){"use strict";var e=t("load_async"),i=t("chaoshi_mod_conf"),r=t("report"),n=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],groupIdsSku:[],next:function(){}},t),this.init()};return n.prototype={init:function(){var t=1,a=1;this.canNextLen=t+a,this.dataNameAd=["focus"],this.dataNameAdNum=[1,0],this.dataNameSku=["goods"],this.dataNameSkuNum=[10],this.dataNameSkuImgSize=[{retia:"260x260",normal:"130x130"}],this.floorHashStr="category";for(var o=0;o<t;o++)this.initAdData(this.conf.groupIdsAd[o].ANCHOR||"",this.dataNameAd[o],this.dataNameAdNum[o]);for(var o=0;o<a;o++)this.initSkuData(this.conf.groupIdsSku[o].ANCHOR||"",this.dataNameSku[o],this.dataNameSkuNum[o],this.dataNameSkuImgSize[o])},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initAdData:function(t,a,o){var n=this,s=n.conf.elId,d=i.INTERFACE;e({url:d.AIBI_AD+t,backup:d.AIBI_AD_BACKUP+t,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:n.conf.elId+"_"+a,dataCheck:function(t){return!!("object"==typeof t&&0==t.ERR_CODE&&$.isArray(t.DATA.adData)&&t.DATA.adData.length>=o)}}).then(function(e){try{"object"==typeof e&&0===e.ERR_CODE&&e.DATA&&e.DATA.adData&&e.DATA.adData.length>=o?(window.data[s][a]=pageConfig.filterChaoshiAdData(e.DATA.adData),n.canNext()):n.hideFloor(t)}catch(i){n.hideFloor(t)}},function(){r.processBackup(pageConfig.reportFloorHideOrBackupHash[n.floorHashStr]),n.hideFloor(t)})},initSkuData:function(t,a,o,n){var s=this,d=i.INTERFACE;e({url:d.AIBI_SKU+t,backup:d.AIBI_SKU_BACKUP+t,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:s.conf.elId+"_"+a,dataCheck:function(t){return!!("object"==typeof t&&0===t.ERR_CODE&&$.isArray(t.DATA.data)&&$.isArray(t.DATA.data[0].skuData)&&t.DATA.data[0].skuData.length>=o)}}).then(function(e){try{"object"==typeof e&&0===e.ERR_CODE&&$.isArray(e.DATA.data)&&$.isArray(e.DATA.data[0].skuData)&&e.DATA.data[0].skuData.length>=o?(window.data[s.conf.elId][a]=pageConfig.filterChaoshiSkuData(e.DATA.data[0].skuData,n.retia,n.normal),s.canNext()):s.hideFloor(t)}catch(i){s.hideFloor(t)}},function(){r.processBackup(pageConfig.reportFloorHideOrBackupHash[s.floorHashStr]),s.hideFloor(t)})},hideFloor:function(t){var a=this,o=a.conf,e=o.$el;e.hide(),_.console.log(t+" error");for(var i=$("[data-elevator]"),n=$(".chaoshi_lift_item"),s=0,d=i.length;s<d;s++)if($(i[s]).attr("id")===o.elId)return n.eq(s).remove(),e.removeAttr("data-elevator"),void chaoshiLift.update($("[data-elevator]"));r.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[a.floorHashStr])}},n}),define("v3/widget/chaoshi_category",function(t,a,o){"use strict";var e=t("load_async"),i=t("chaoshi_mod_conf"),r=t("v3/widget/chaoshi_mod_bi"),n=t("o2tpl"),s=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],title:[],portal_floor_id:""},t),this.init()};return s.prototype={init:function(t){this.dataNameAd=["focus","colImg"],this.dataNameAdNum=[1,0],this.recDom='        {% if(o.colImg && o.colImg.length > 0) { %}\n        {% var obj = o.colImg[0]; %}\n        <div class="chaoshi_rec">\n            <a class="chaoshi_rec_pic" href="{%= obj.link %}" target="_blank" title="{%= obj.name %}" style="background: {%= obj.tag ? obj.tag : \'transparent\' %};" title="{%= obj.name %}" clstag="channel|keycount|{%= o.portal_id %}|colImg{%=o.portal_floor_id%}_1" onclick="log(\'chaoshi\',\'big_banner\',\'{%= obj.name %}\',\'{%= o.title && (+o.title[0].property+1) %}\')">\n              <img width="1600" height="140" src="//static.360buyimg.com/mtd/pc/cms/images/mod_1x1.png" data-lazy-img="{%= obj.pictureUrl %}" alt="{%= obj.name %}">\n            </a>\n\n        </div>\n        {% } %}',this.skuPlusPriceObj=null,this.initAdData(1),this.getPlusPrice()},initAdData:function(t){var a,o=this,e=this.conf;a=o.dataNameAd[t],r.getAds({$obj:e.$el,elId:e.elId,dataName:a,id:e.groupIdsAd[t]&&e.groupIdsAd[t].ANCHOR||"",minNum:o.dataNameAdNum[t],isNeedBackup:!1,isHide:!1,cb:function(t){var i={};i[a]=t,i.title=e.title,i.portal_id="3054",i.portal_floor_id=e.portal_floor_id;try{var r=n(o.recDom,i);e.$el.append(r),$(window).trigger("resize")}catch(s){_.console.log(e.elId+" "+a+" render error"),_.console.log(s)}}})},getPlusPrice:function(){for(var t=this,a=window.data[t.conf.elId].goods,o=[],r=0,n=a.length;r<n;r++)o.push("J_"+a[r].skuId);var s="//p.3.cn/prices/mgets?type=1&skuids="+o.join(",");e({url:s,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:t.conf.elId+"_getPlusPrice"}).then(function(a){try{if(a.length>0){for(var o,e=0,i=a.length;e<i;e++)o=a[e],(o.tpp||o.pp)&&(t.skuPlusPriceObj=t.skuPlusPriceObj||{},t.skuPlusPriceObj[o.id]=o.tpp||o.pp);t.showPlusDom()}}catch(r){_.console.log(r)}})},showPlusDom:function(){for(var t,a=this,o=a.conf.$el.find(".goods_item"),e="",i=0,r=o.length;i<r;i++)t=$(o[i]).find(".goods_prices_plus"),e=t&&$(t[0]).attr("data-price-id"),a.skuPlusPriceObj&&a.skuPlusPriceObj["J_"+e]&&(t.addClass("show"),t.find(".goods_prices_plus_txt").html("&yen;"+a.skuPlusPriceObj["J_"+e]))}},s});define("v3/widget/chaoshi_like_render",function(o,i,t){"use strict";var e=o("chaoshi_mod_conf"),a=o("load_async"),s=o("report"),n=_.Class.extend({construct:function(o){this.conf=$.extend({$el:null,elId:"",next:function(){}},o),this.init()},init:function(){this.pageNum=30,this.totalNum=120,this.dataList=[],this.floorHashStr="like",this.renderLike();var o=this.conf,i=o.elId;window.data[i].moreList=[]},loadLikeData:function(o,i){var t=this,s=window.pageConfig,n=readCookie("pin")||"";n=decodeURIComponent(n);var r={p:619067,lid:readCookie("areaId")||1,uuid:readCookie("__jda")||-1,pin:n,lim:this.totalNum,ec:"utf-8"},l=e.INTERFACE;a({url:l.MORE,backup:l.MORE_BACKUP,params:r,jsonpCallback:"likeGoods",timeout:e.TIMEOUT,dataCheck:function(o){return!("object"!=typeof o||!o.data||!$.isArray(o.data))}}).then($.proxy(function(i){var e={};if("object"==typeof i&&i.data&&$.isArray(i.data)){for(var a=0;a<i.data.length;a++){var n=i.data[a];n.img=s.FN_GetImageDomain(n.sku)+"jdcms/"+n.img,n.img=s.processImageUrl(n.img,"280x280","140x140")}e.list=i.data,_.console.log("猜你喜欢数据长度： "+e.list.length),o(e)}else t.hideLike("猜你喜欢接口数据错误")},this),i)},renderLike:function(){var o=this,i=o.conf;i.$el;this.loadLikeData(function(t){if(t){if(!t.list.length||t.list.length<6)return void o.hideLike("猜你喜欢数据长度小于6，隐藏楼层");window.data[i.elId].moreList=t.list,i.next&&i.next()}else i.next&&i.next(),o.hideLike("猜你喜欢数据不存在")},function(t,e){i.next&&i.next(),o.hideLike("猜你喜欢接口错误"),s.processBackup(pageConfig.reportFloorHideOrBackupHash[o.floorHashStr])})},hideLike:function(o){var i=this,t=i.conf,e=t.$el;e.hide(),_.console.log(o);for(var a=$("[data-elevator]"),n=$(".chaoshi_lift_item"),r=0,l=a.length;r<l;r++)if($(a[r]).attr("id")===t.elId)return n.eq(r).remove(),e.removeAttr("data-elevator"),void chaoshiLift.update($("[data-elevator]"));s.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[i.floorHashStr])}});return n}),define("v3/widget/chaoshi_like",function(o,i,t){"use strict";var e=o("o2tpl"),a=_.Class.extend({construct:function(o){this.conf=$.extend({$el:null,elId:""},o),this.init()},init:function(){var o=this.conf,i=o.elId;this.pageNum=30,this.totalNum=120,this.rowNum=6,this.pn=0,this.dataList=[],this.moreDom=["{% if(o.list && o.list.length) {","        $.each(o.list, function(i, obj){ %}",'    <li class="J_more_item J_goods_item goods_item">','        <a class="goods_pic" href="//item.jd.com/{%= obj.sku %}.html" target="_blank" title="{%= obj.t %}" clstag="channel|keycount|{%= o.portal_id %}|likeGoods{%=o.portal_floor_id%}_{%=o.begin + i%}" onclick="++pageConfig.chaoshiClickNum;log(\'chaoshi\',\'like\',\'{%= obj.sku %}\',\'{%= o.begin + i %}\',\'\')">','          <img class="J_goods_img goods_img" src="//static.360buyimg.com/mtd/pc/cms/images/mod_1x1.png" data-lazy-img="{%= obj.img %}" alt="{%= obj.t %}">',"        </a>",'        <p class="goods_title">{%= obj.t %}</p>','        <p class="J_more_info_price J_goods_price goods_price" data-price-id="{%= obj.sku %}">&yen;{%= (+obj.jp).toFixed(2) %}</p>','        <a class="J_goods_add goods_add" href="javascript:;" clstag="channel|keycount|{%=o.portal_id%}|buygoodsAdd{%=o.portal_floor_id%}_{%=o.begin + i%}" onclick="++pageConfig.chaoshiClickNum;log(\'chaoshi\',\'like\',\'{%= obj.sku %}加入购物车\',\'\',\'{%= o.begin + i %}\')"><i class="goods_add_icon"></i><span class="goods_add_txt">加入购物车</span></a>',"    </li>","    {% });} %}"].join(""),this.moreList=window.data[i].moreList,this.$doc=$(document),this.$w=$(window),this.$ul=o.$el.find(".J_more_list"),this.floorHashStr="like",this.renderLike(!0),this.initScroll()},renderLike:function(o){var i=this,t=i.conf,a=(t.$el,{begin:o?0:i.pageNum*i.pn,portal_id:"3054",portal_floor_id:"_"+i.conf.elId});if(!i.moreList.length)return void i.$w.unbind("scroll.loadLike");var s=i.moreList.slice(),n=s.length;n>i.pageNum?(a.list=s.splice(0,i.pageNum),i.moreList=s):n<=i.pageNum&&n>=i.rowNum?(a.list=s.splice(0,Math.floor(n/i.rowNum)*i.rowNum),i.moreList=[]):i.moreList=[],i.pn++;try{var r=e(i.moreDom,a);i.$ul.append(r)}catch(l){_.console.log(l),i.conf.$el.hide(),Report.processHidedFloor(pageConfig.reportFloorHideOrBackupHash[i.floorHashStr])}},initScroll:function(){var o=this,i=null;o.$w.bind("scroll.loadLike",function(){i&&clearTimeout(i),i=setTimeout(function(){o.$doc.height()-(o.$w.height()+o.$doc.scrollTop())<500&&o.renderLike(!1)},60)})}});return a});!function(t){"use strict";var e=function(t){var e={$el:$(".chaoshi_lift"),floor:$("[data-elevator]"),elevatorList:".chaoshi_lift_item",elevatorOnClass:"chaoshi_lift_item_btn_active",elevatorTopClass:".chaoshi_lift_top",scrollSpeed:300};$.extend(this,e,t||{}),this.init()},i=function(t,e){var i=null;return function(){var n=this,o=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(n,o)},e)}};e.prototype={init:function(){this.initEvent()},initEvent:function(){var e=this,n=e.$el;e.$el.delegate(e.elevatorList,"click",function(){var t=e.floor,i=$(this),o=n.find(e.elevatorList).index(i),s=0;0!==t.eq(o).length&&(s=t.eq(o).offset().top,t.eq(o).data("offset")&&(s+=t.eq(o).data("offset")),e.go(s,function(){e.setClass(o)}))}),e.$el.delegate(e.elevatorTopClass,"click",function(){e.go(0)}),$(t).bind("scroll.elevator",i($.proxy(this.detect,this),100)),$(t).bind("resize.elevator",i($.proxy(this.resize,this),200)),e.resize().detect()},detect:function(){var e=this,i=e.$el,n=e.floor,o=0,s=[],l=$(document).scrollTop(),a=$(t).height();if(0!==n.length)if(l+a>n.eq(0).offset().top){i.fadeIn();var c=!1;n.each(function(t){var e=$(this),i=e.offset().top,o=e.outerHeight(),f=0;i-(l+a)<0&&i+o>=l&&(l>i&&(f=o+i-l),i>=l&&l+a>i&&(f=l+a-i),!c&&f>a/3&&(c=!0,f=9999),t===n.length-1&&l>n.eq(t-1).offset().top&&l+a-(i+o)>0&&(f=1e4),s.push({floor:e,chance:f,idx:t}))});var f=s.length>0?(s.sort(function(t,e){return t.chance<e.chance?-1:1}),s.pop()):null;o=f?f.idx:-1,e.setClass(o)}else i.fadeOut()},go:function(t,e){var i=this;$("body,html").stop(!1,!0).animate({scrollTop:t},i.scrollSpeed,function(){e&&e()})},setClass:function(t){var e=this.$el.find(this.elevatorList);e.removeClass(this.elevatorOnClass),t>=0&&e.eq(t).addClass(this.elevatorOnClass)},update:function(t){return this.floor=t,this},resize:function(){var t=this.$el,e=$(window).width(),i=$(window).height(),n=1190;return t.css({left:(e-n)/2-100,top:.5*(i-t.height())}),e<1370&&t.css({right:"auto",left:0}),this}},"function"==typeof define?define("v3/widget/chaoshi_lift",function(){return e}):t.Lift=e}(window),define("v3/widget/chaoshi_lift_render",function(t){var e=t("load_async"),i=t("chaoshi_mod_conf"),n=function(t){this.conf=$.extend({$el:null,elId:"",next:function(){}},t),this.init()};return n.prototype={init:function(){this.isXinren()},isXinren:function(){var t=this,n=window.data[t.conf.elId];e({url:i.INTERFACE.IS_XINREN,backup:null,times:i.TIME,timeout:i.TIMEOUT,jsonpCallback:"isNewuser"}).then(function(e){try{e&&!e.islogin?n.isNew=2:e&&!e.isNew?n.isNew=0:e&&e.isNew&&(n.isNew=1),t.conf.next&&t.conf.next()}catch(i){n.isNew=2,t.conf.next&&t.conf.next()}},function(){n.isNew=2,t.conf.next&&t.conf.next()})}},n});define("v3/widget/chaoshi_top_render",function(t,e,n){"use strict";var i=t("v3/widget/chaoshi_mod_bi"),o=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],next:function(){}},t),this.init()};return o.prototype={init:function(t){this.canNextLen=1,this.loadedEvent=this.conf.elId+"Loaded",this.dataNameAd=["topImg"],this.dataNameAdNum=[1],this.initEvent(),this.initAdData()},initEvent:function(){var t=this,e=t.conf;_.eventCenter.on(t.loadedEvent,function(){--t.canNextLen,0===t.canNextLen&&e.next&&e.next()})},initAdData:function(){for(var t,e=this,n=this.conf,o=n.groupIdsAd.length,d=0;d<o;d++)t=e.dataNameAd[d],i.getAds({$obj:n.$el,elId:n.elId,dataName:t,id:n.groupIdsAd[d].ANCHOR||"",minNum:e.dataNameAdNum[d],isNeedBackup:!1,cb:function(t){_.eventCenter.trigger(e.loadedEvent)}})}},o}),define("v3/widget/chaoshi_top",function(t,e,n){"use strict";var i=function(t){this.conf=$.extend({$el:null,portal_floor_id:""},t),this.init()};return i.prototype={init:function(){this.oHeader=document.getElementById("o-header-2013"),this.header=document.getElementById("header-2013"),this.topBanner=document.getElementById("chaoshi_top_lk_"+this.conf.portal_floor_id),this.topBanner&&this.oHeader.insertBefore(this.topBanner,this.header),this.initEvent()},initEvent:function(){var t=this;$(t.topBanner);$(t.topBanner).delegate(".chaoshi_top_close","click",function(){return t.oHeader.removeChild(t.topBanner),!1})}},i});define("v3/widget/chaoshi_pop_render",function(t,o,i){"use strict";var n=t("load_async"),e=t("chaoshi_mod_conf"),a=t("report"),s=function(t){this.conf=$.extend({$el:null,elId:"",groupIdsAd:[],next:function(){}},t),this.init()};return s.prototype={init:function(){var t=this,o=t.conf;this.canNextLen=1,this.floorHash=pageConfig.reportFloorHideOrBackupHash.pop,this.dataNameAd=["popImg"],this.dataNameAdNum=[1],t.initAdData(o.groupIdsAd[0]&&o.groupIdsAd[0].ANCHOR||"",t.dataNameAd[0],t.dataNameAdNum[0])},canNext:function(){this.canNextLen-=1,0===this.canNextLen&&this.conf.next&&this.conf.next()},initAdData:function(t,o,i){var s=this,c=s.conf.elId,d=e.INTERFACE;n({url:d.AIBI_AD+t,backup:null,times:e.TIME,timeout:e.TIMEOUT,jsonpCallback:s.conf.elId+"_"+o}).then(function(n){try{"object"==typeof n&&0===n.ERR_CODE&&n.DATA&&n.DATA.adData&&n.DATA.adData.length>=i?(window.data[c][o]=pageConfig.filterChaoshiAdData(n.DATA.adData),s.canNext()):s.hideFloor(t+" 格式不对或数量不够")}catch(e){s.hideFloor(t+" "+e)}},function(){a.processBackup(s.floorHash),s.hideFloor(t+" fail")})},hideFloor:function(t){this.conf.$el.hide(),_.console.log(t),a.processHidedFloor(this.floorHash)}},s}),define("v3/widget/chaoshi_pop",function(t,o,i){"use strict";var n=function(t){this.conf=$.extend({$el:null},t),this.init()};return n.prototype={init:function(){this.$popBd=this.conf.$el.find(".chaoshi_pop_bd"),this.loadImg()},loadImg:function(){var t=this,o=t.$popBd.find(".chaoshi_pop_lk img"),i=o.attr("data-lazy-img2");o.load(function(){t.$popBd.addClass("animate"),t.initEvent()}),o.attr("src",i)},initEvent:function(){var t=this;this.conf.$el.delegate(".chaoshi_pop_close","click",function(){t.$popBd.removeClass("animate")}),this.setTimeoutClose()},setTimeoutClose:function(){var t=this.conf.$el;setTimeout(function(){t.find(".chaoshi_pop_close").click()},3800)}},n});window.tplVersion={chaoshi_brand_tpl:"917e996f8b0d955a",chaoshi_bs_bigbrand_tpl:"be736d96626db653",chaoshi_bs_firstsee_tpl:"28e63ed87acf0c2a",chaoshi_bs_goodbrands_tpl:"03e00c9cc54cf0b3",chaoshi_bs_hotbrands_tpl:"9ed21b9409d85acf",chaoshi_buy_tpl:"61faae9fa6b163aa",chaoshi_category_tpl:"24fa28b790b4df5a",chaoshi_discount_tpl:"477a79940a24a9f7",chaoshi_fs_tpl:"c65324e2fe7e483d",chaoshi_lift_tpl:"07e6eef7152c8645",chaoshi_like_tpl:"abad1ba505e852dd",chaoshi_mod_nav_tpl:"41967fa188aa6193",chaoshi_pop_tpl:"26f334b1da586f58",chaoshi_rec_tpl:"65a94fe7067c1cb6",chaoshi_rush_tpl:"297baedcba360b93",chaoshi_rushTpl_tpl:"574a5f4ab98c4834",chaoshi_rushmore_tpl:"641b635494b8fec7",chaoshi_seckill_tpl:"7a2e09ba5b022833",chaoshi_top_tpl:"8b308bb4ffb1182b",liangfan_category_tpl:"529b96fe46fb8fed",liangfan_daily_tpl:"74f99b0db6f33491",liangfan_diy_tpl:"2d3af4223f5cb908",liangfan_good_tpl:"ce56d17804065081",liangfan_lift_tpl:"fa43d230a91aa551",liangfan_unique_tpl:"8aed2d2df6d90734"},seajs.use("report",function(a){a.init(457,471,472)}),pageConfig.chaoshiClickNum=0,pageConfig.chaoshiScreenNumArr=[];var $window=$(window);$window.load(function(){var a=$window.height(),i=0===$window.scrollTop()?1:Math.ceil($window.scrollTop()/a);pageConfig.chaoshiScreenNumArr[i]=i,log("chaoshi","chaoshi_depth","1","",""),$window.scroll(function(){i=0===$window.scrollTop()?1:Math.ceil($window.scrollTop()/a),pageConfig.chaoshiScreenNumArr[i]||(pageConfig.chaoshiScreenNumArr[i]=i,log("chaoshi","chaoshi_depth","1","",""))})}),$window.unload(function(){var a=$(".chaoshi_lift_item").filter(".chaoshi_lift_item_btn_active").index()+3,i=pageConfig.chaoshiClickNum+"_biimpr";log("chaoshi","chaoshi_depth","",a,i)});