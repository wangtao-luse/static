!function(p){var n={debug:!1,isSubmited:!1},a=[];placeholder=function(e){e=e||"#a9a4a8";var t=$("#search-2014 #key");if(!("placeholder"in document.createElement("input")))for(var i=t.length,r=0;r<i;r++){var o=t[r],n=$(o).attr("placeholder");""==$(o).val()&&null!=n&&($(o).val(n),a[r]=$(o).css("color"),$(o).css("color",e))}t.focus(function(){null!=$(this).attr("placeholder")&&$(this).val()==$(this).attr("placeholder")&&($(this).val(""),function(e){$(e).index();var t=a[$(e).index()];$(e).css("color",t)}(this))}).blur(function(){null==$(this).attr("placeholder")||""!=$(this).val()&&$(this).val()!=$(this).attr("placeholder")||$(this).hasClass("shutdown")||($(this).val($(this).attr("placeholder")),$(this).css("color",e))})};var l=function(){};function t(e){var t,i=document.getElementById(e).value;if(100<(i=i.replace(/^\s*(.*?)\s*$/,"$1")).length&&(i=i.substring(0,100)),""!=i){void 0!==p.pageConfig&&void 0!==p.pageConfig.searchType&&p.pageConfig.searchType;var r="string"==typeof l.cid?l.cid:"",o="string"==typeof l.cLevel?l.cLevel:"";if("string"==typeof r&&""!=r&&"string"==typeof o){o="-1"==o?"":/^(?:[1-8])?([1-3])$/.test(o)?RegExp.$1:""}i=encodeURIComponent(i),t=(t="//search.jd.hk/Search?keyword={keyword}&enc=utf-8".replace(/\{keyword}/,i)).replace(/\{enc}/,"utf-8"),0==n.isSubmited&&(setTimeout(function(){n.isSubmited=!1,p.location.href=t},10),n.isSubmited=!0)}else p.location.href=p.location.href}l.prototype.addSearchEvent=function(){$("#search-2014 .form .action-search-worldwide, #nav-mygb .form button").unbind("click").bind("click",function(){t($(this).parent().find("input").attr("id"))}),$("#search-2014 .form input, #nav-mygb .form input").unbind("keydown").bind("keydown",function(e){13==e.keyCode&&t($(this).attr("id"))})},l.prototype.init=function(e){for(var t="",i=e.logoRightAd,r=e.indexTopSearchPlaceHolderText||[{text:""}],o=e.indexTopSearchKeyWords||[],n=$("#search-2014"),a=n.find("#key"),l=n.find("#hotwords-2014"),c=0;c<o.length;c++){var d=o[c];t+='<a href="'+d.linkText+'" target="_blank" class="style-red">'+d.text+"</a>"}a.attr({placeholder:r[0].text,value:r[0].text}),l.html(t);var s=$("#logoRightAd");if(i&&0<i.length?(i=i[0],s.attr("href",i.linkText),s.children("img").attr("src",i.actImg)):s.remove(),this.addSearchEvent(),placeholder(),p.worldwide&&p.worldwide.config){var h=p.worldwide.config.step||0,f=$("#cjProcessBar");if(0<f.length){steps=f.find(".cj-step");for(c=0;c<=h;c++)$(steps[c]).addClass("active")}}},p.worldwide=p.worldwide||{},p.worldwide.search=new l}(window);